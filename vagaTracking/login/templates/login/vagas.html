{% extends "login/base.html" %}
{% load static %}

{% block title %}Vagas Dispon√≠veis{% endblock %}

{% block content %}
<script>
document.body.classList.add('page-layout');
</script>

<h1>Vagas Dispon√≠veis</h1>

<div class="filtros">
    <input type="text" id="busca" placeholder="üîç Buscar vaga por t√≠tulo..." oninput="filtrarVagas()" />
    
    <select id="filtroArea" onchange="filtrarVagas()">
        <option value="">Todas as √°reas</option>
        <option value="Desenvolvimento">Desenvolvimento</option>
        <option value="Design">Design</option>
        <option value="Dados">Dados</option>
    </select>
</div>

<div id="vagas-lista" class="vagas-grid"></div>

<div id="detalhes-vaga" class="oculto">
    <h2 id="titulo-vaga"></h2>
    <p id="descricao-vaga"></p>
    <ul id="requisitos-vaga"></ul>
    <button onclick="abrirModal()">Candidatar-se</button>
</div>

<div id="modal" class="modal oculto">
    <div class="modal-conteudo">
        <span class="fechar" onclick="fecharModal()">&times;</span>
        <h3>Candidatura √† Vaga</h3>
        <form onsubmit="enviarFormulario(event)" class="form-linkedin">
            <div class="form-group">
                <label>Nome completo</label>
                <input type="text" placeholder="Ex: Jo√£o da Silva" required />
            </div>

            <div class="form-group">
                <label>Email profissional</label>
                <input type="email" placeholder="Ex: joao@email.com" required />
            </div>

            <div class="form-group">
                <label>LinkedIn (opcional)</label>
                <input type="url" placeholder="https://linkedin.com/in/seu-nome" />
            </div>

            <div class="form-group">
                <label>Mensagem</label>
                <textarea placeholder="Fale um pouco sobre voc√™ e por que deseja essa vaga" required></textarea>
            </div>

            <button type="submit">Enviar candidatura</button>
        </form>
    </div>
</div>

<script>
// Dados de exemplo das vagas
const vagas = [
    {
        id: 1,
        titulo: "Desenvolvedor Frontend React",
        area: "Desenvolvimento",
        descricao: "Desenvolvimento de interfaces modernas e responsivas usando React, TypeScript e Tailwind CSS.",
        requisitos: ["React.js", "TypeScript", "Tailwind CSS", "Git", "Experi√™ncia com APIs REST"]
    },
    {
        id: 2,
        titulo: "Designer UX/UI",
        area: "Design",
        descricao: "Cria√ß√£o de experi√™ncias digitais intuitivas e interfaces atrativas para produtos web e mobile.",
        requisitos: ["Figma", "Adobe Creative Suite", "Prototipagem", "Design System", "User Research"]
    },
    {
        id: 3,
        titulo: "Analista de Dados",
        area: "Dados",
        descricao: "An√°lise de dados para insights de neg√≥cio, cria√ß√£o de dashboards e relat√≥rios estrat√©gicos.",
        requisitos: ["Python", "SQL", "Power BI", "Excel Avan√ßado", "Estat√≠stica"]
    },
    {
        id: 4,
        titulo: "Desenvolvedor Backend Node.js",
        area: "Desenvolvimento",
        descricao: "Desenvolvimento de APIs robustas e escal√°veis usando Node.js, Express e bancos de dados.",
        requisitos: ["Node.js", "Express", "MongoDB", "PostgreSQL", "Docker", "AWS"]
    }
];

// Fun√ß√£o para renderizar as vagas
function renderizarVagas(vagasFiltradas = vagas) {
    const container = document.getElementById('vagas-lista');
    
    if (vagasFiltradas.length === 0) {
        container.innerHTML = '<p style="text-align: center; color: var(--text-muted); grid-column: 1 / -1;">Nenhuma vaga encontrada.</p>';
        return;
    }
    
    container.innerHTML = vagasFiltradas.map(vaga => `
        <div class="vaga-card" onclick="mostrarDetalhes(${vaga.id})">
            <h3>${vaga.titulo}</h3>
            <div class="area">${vaga.area}</div>
            <p class="descricao">${vaga.descricao}</p>
            <ul class="requisitos">
                ${vaga.requisitos.slice(0, 3).map(req => `<li>${req}</li>`).join('')}
                ${vaga.requisitos.length > 3 ? '<li>+ mais requisitos...</li>' : ''}
            </ul>
        </div>
    `).join('');
}

// Fun√ß√£o para filtrar vagas
function filtrarVagas() {
    const busca = document.getElementById('busca').value.toLowerCase();
    const area = document.getElementById('filtroArea').value;
    
    const vagasFiltradas = vagas.filter(vaga => {
        const matchBusca = vaga.titulo.toLowerCase().includes(busca);
        const matchArea = !area || vaga.area === area;
        return matchBusca && matchArea;
    });
    
    renderizarVagas(vagasFiltradas);
}

// Fun√ß√£o para mostrar detalhes da vaga
function mostrarDetalhes(id) {
    const vaga = vagas.find(v => v.id === id);
    if (!vaga) return;
    
    document.getElementById('titulo-vaga').textContent = vaga.titulo;
    document.getElementById('descricao-vaga').textContent = vaga.descricao;
    document.getElementById('requisitos-vaga').innerHTML = 
        vaga.requisitos.map(req => `<li>${req}</li>`).join('');
    
    document.getElementById('detalhes-vaga').classList.remove('oculto');
    document.getElementById('detalhes-vaga').scrollIntoView({ behavior: 'smooth' });
}

// Fun√ß√£o para abrir modal
function abrirModal() {
    document.getElementById('modal').classList.add('ativo');
    document.body.style.overflow = 'hidden';
}

// Fun√ß√£o para fechar modal
function fecharModal() {
    document.getElementById('modal').classList.remove('ativo');
    document.body.style.overflow = 'auto';
}

// Fun√ß√£o para enviar formul√°rio
function enviarFormulario(event) {
    event.preventDefault();
    alert('Candidatura enviada com sucesso! Entraremos em contato em breve.');
    fecharModal();
    event.target.reset();
}

// Fechar modal ao clicar fora
document.getElementById('modal').addEventListener('click', function(e) {
    if (e.target === this) {
        fecharModal();
    }
});

// Inicializar p√°gina
document.addEventListener('DOMContentLoaded', function() {
    renderizarVagas();
});
</script>
{% endblock %}

